<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="icon" href="{{ url_for('static', filename='images/logo_aeb.jpg') }}" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/login.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
</head>
<body>
    <section class="split-section">
        <div class="login-section">
            <div class="login-box">
                <form id="loginForm" method="POST" action="/login">
                    <h2>Faça o Login</h2>
            
                    <div class="wrap-input margin-top-35 margin-bottom-35">
                        <span class="icon"><ion-icon name="mail"></ion-icon></span>
                        <input class="input-form" type="text" name="username" autocomplete="off" id="username">
                        <span class="focus-input-form" data-placeholder="Usuário"></span>
                    </div>

                    <div class="wrap-input margin-bottom-35">
                        <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                        <input class="input-form" type="password" name="password" id="password">
                        <span class="focus-input-form" data-placeholder="Senha"></span>
                    </div>

                    <div class="container-login-form-btn">
                        <button class="login-form-btn" type="submit">Acessar</button>
                    </div>
                </form>
            </div>
        </div>

    </section>
    {% if error_message %}
    <script>
        window.onload = function() {
            Swal.fire({
                icon: 'error',
                title: 'Erro!',
                text: "{{ error_message }}",
                confirmButtonColor: '#d33',
            });
        };
    </script>
{% endif %}
<footer>
    <img src="{{ url_for('static', filename='images/assinatura_gov.png') }}" alt="Ass Gov" class="footer-gov">
</footer>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

<script>
    // Função para exibir a mensagem de erro
    function showErrorPopup(message) {
        const popup = document.getElementById('error-popup');
        popup.innerText = message;
        popup.style.display = 'block';

        // Automatically hide the error message after a few seconds (adjust the timeout value as needed)
        setTimeout(() => {
            popup.style.display = 'none';
        }, 3000); // Hide after 3 seconds (adjust as needed)
    }

    // Verifique se a URL atual possui o parâmetro de erro
    const urlParams = new URLSearchParams(window.location.search);
    const erro = urlParams.get('erro');

    // Verifique se há um parâmetro de erro e exiba a mensagem de erro correspondente
    if (erro === 'credenciais_invalidas') {
        exibirMensagemErro();
    }
</script>

<script>
    let inputs = document.getElementsByClassName("input-form");
    for (let input of inputs) {
        input.addEventListener("blur", function() {
            if (input.value.trim() != "") {
                input.classList.add("has-val");
            } else {
                input.classList.remove("has-val");
            }
        });
    }
</script>
<script src="{{ static_file }}"></script>
</body>
</html>
